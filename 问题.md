1.动画和 setVisible 冲突

```kotlin
override fun setVisibility(visibility: Int) {
    super.setVisibility(visibility)
    if (visibility == View.VISIBLE) {
        startAnimation(upDownAnim)
    } else {
        clearAnimation()
    }
}
```

2.app A开 http 服务，另一个 app B中使用 H5 访问 A 中的服务

A 的服务需要支持跨域

```java
Response.addHeader("Access-Control-Allow-Origin", "*") // 支持的域名
Response.addHeader("Access-Control-Allow-Methods", "POST, GET, OPTIONS, DELETE") // 支持的请求类型
```

如果 H5 有自定义 header ，需要加上

```java
Response.addHeader("Access-Control-Allow-Headers", "*,token") 
没有会报错 xmlHttpRequest *** token preflight ***
```

可能需要（没验证）

```java
Response.addHeader("Access-Control-Allow-Credentials","true")
```



B 的 webview 也需要开启部分设置

```java
WebSettings settings = webView.getSettings();
settings.setJavaScriptEnabled(true);
settings.setDomStorageEnabled(true);
settings.setAllowFileAccess(true);

//没有vivo/oppo 5.x 会报 xmlHttpRequest xxx failed to loading
settings.setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW); // 如果 H5 是 http/https 混用

settings.setAllowFileAccessFromFileURLs(true);
settings.setAllowContentAccess(true);
settings.setAllowUniversalAccessFromFileURLs(true);
settings.setPluginState(WebSettings.PluginState.ON);
```

这样 H5 就可以访问了